---
import { Icon } from 'astro-icon/components'
import orbitScriptUrl from './icon-orbit.client.ts?url'
interface IconItem { title: string; icon?: string; iconName?: string; slug?: string }
interface Props { icons: Array<IconItem>; iconPx?: number; gap?: number; radiusScale?: number; spin?: number }
const { icons, iconPx = 96, gap = 18, radiusScale = 0.46, spin = 0.006 } = Astro.props as Props;
---
<div class="orbit" data-icon-orbit="1" data-iconpx={iconPx} data-gap={gap} data-radius-scale={radiusScale} data-spin={spin} style={`--size:${iconPx}px`} aria-label="App icons">
  {icons.map((it) => (
    <a class="node" href={it.slug ? `#project-${it.slug}` : undefined} aria-label={it.title} title={it.title}>
      <span class="inner" title={it.title}>
        {it.icon ? (
          <img src={it.icon} alt={it.title} />
        ) : it.iconName ? (
          <Icon name={it.iconName} />
        ) : null}
      </span>
    </a>
  ))}
</div>

<style>
.orbit { position: relative; width: 100%; height: clamp(360px, 80vh, 1200px); }
.orbit { opacity: 0; transition: opacity .6s ease; }
.orbit.ready { opacity: 1; }
.orbit .node { position: absolute; left: 0; top: 0; text-decoration: none; }
.orbit .inner {
  width: var(--size); height: var(--size);
  display: grid; place-items: center;
  border-radius: 18px; padding: 8px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
  will-change: transform;
}
.orbit .inner { transform: translateY(20vh); }
.orbit.ready .inner { animation: rise 1.6s ease-out .4s forwards; }
  .orbit img { width: 100%; height: 100%; border-radius: 12px; display: block; object-fit: contain; }
  .orbit .inner svg { width: 100%; height: 100%; border-radius: 12px; display: block; object-fit: contain; }
@keyframes rise { from { transform: translateY(20vh); } to { transform: translateY(0); } }
/* Match Hero contact link bobble animations */
@keyframes bobbleA {
  0%, 100% { transform: translate(0,0) rotate(0deg); }
  20% { transform: translate(6px, -9px) rotate(3deg); }
  40% { transform: translate(-4px, -2px) rotate(-2deg); }
  60% { transform: translate(-7px, 6px) rotate(-3deg); }
  80% { transform: translate(4px, 4px) rotate(2deg); }
}
@keyframes bobbleB {
  0%, 100% { transform: translate(0,0) rotate(0deg); }
  25% { transform: translate(-8px, 5px) rotate(-3deg); }
  50% { transform: translate(4px, -4px) rotate(2deg); }
  75% { transform: translate(6px, 3px) rotate(3deg); }
}
@keyframes bobbleC {
  0%, 100% { transform: translate(0,0) rotate(0deg); }
  30% { transform: translate(5px, 6px) rotate(2.5deg); }
  60% { transform: translate(-6px, 2px) rotate(-2.5deg); }
}

/* Staggered application like the contact links */
.orbit.ready .node:nth-child(3n+1) .inner { animation: rise 1.6s ease-out .4s forwards, bobbleA 18s ease-in-out .2s infinite; }
.orbit.ready .node:nth-child(3n+2) .inner { animation: rise 1.6s ease-out .4s forwards, bobbleB 22s ease-in-out 1.1s infinite; }
.orbit.ready .node:nth-child(3n) .inner { animation: rise 1.6s ease-out .4s forwards, bobbleC 26s ease-in-out .6s infinite; }
@media (prefers-reduced-motion: reduce) {
  .orbit .inner { animation: none; transform: none; }
}
</style>

<script type="module" src={orbitScriptUrl}></script>


